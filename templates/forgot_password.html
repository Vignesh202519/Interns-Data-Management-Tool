<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password | Thundersoft</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
        body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;position:relative}
        .container{background:rgba(255,255,255,0.95);padding:40px;border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,0.2);max-width:450px;width:100%;text-align:center;position:relative;transition:transform 0.3s ease,box-shadow 0.3s ease}
        .container:hover{transform:translateY(-5px);box-shadow:0 20px 40px rgba(0,0,0,0.25)}
        .container::before{content:'';position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(90deg,#4361ee,#3a0ca3);border-radius:20px 20px 0 0}
        .logo h1{font-weight:700;background:linear-gradient(90deg,#4361ee,#3a0ca3);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:2rem;margin-bottom:20px}
        h2{margin-bottom:10px;color:#333;font-size:28px;position:relative;display:inline-block}
        h2::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:50px;height:3px;background:linear-gradient(90deg,#4361ee,#3a0ca3);border-radius:3px}
        .subtitle{color:#6c757d;margin-bottom:30px;font-size:16px}
        .input-group{position:relative;margin-bottom:25px}
        input[type="email"]{width:100%;padding:15px 15px 15px 45px;border:2px solid #e1e1e1;border-radius:10px;font-size:16px;transition:all 0.3s ease;background:#f9f9f9}
        input:focus{border-color:#4361ee;box-shadow:0 0 0 3px rgba(67,97,238,0.2);outline:none;background:#fff}
        .input-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#999;font-size:18px;transition:color 0.3s}
        input:focus+.input-icon{color:#4361ee}
        .btn{padding:15px;border:none;border-radius:10px;width:100%;cursor:pointer;font-size:16px;font-weight:600;transition:all 0.3s;margin-bottom:15px;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden}
        .btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s}
        .btn:hover::before{left:100%}
        .submit-btn{background:linear-gradient(90deg,#4361ee,#3a0ca3);color:white}
        .submit-btn:hover{background:linear-gradient(90deg,#4cc9f0,#4361ee);box-shadow:0 5px 15px rgba(67,97,238,0.4)}
        .back-link{display:inline-flex;align-items:center;gap:8px;margin-top:25px;color:#6c757d;text-decoration:none;font-weight:500;transition:color 0.3s;position:relative}
        .back-link:hover{color:#4361ee}
        .back-link::after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:1px;background:#4361ee;transition:width 0.3s}
        .back-link:hover::after{width:100%}
        .illustration{margin:20px 0 30px;color:#4361ee;font-size:80px;opacity:0.8}
        .steps{display:flex;justify-content:space-between;margin:30px 0;position:relative}
        .steps::before{content:'';position:absolute;top:20px;left:10%;width:80%;height:2px;background:#e1e1e1;z-index:1}
        .step{display:flex;flex-direction:column;align-items:center;z-index:2}
        .step-circle{width:40px;height:40px;border-radius:50%;background:#e1e1e1;display:flex;align-items:center;justify-content:center;margin-bottom:10px;font-weight:bold;color:#999;transition:all 0.3s}
        .step.active .step-circle{background:#4361ee;color:white;box-shadow:0 0 0 5px rgba(67,97,238,0.2)}
        .step-text{font-size:12px;color:#999;max-width:80px}
        .step.active .step-text{color:#4361ee;font-weight:500}
        .alert{padding:15px;border-radius:10px;margin-bottom:20px;border:1px solid transparent}
        .alert-success{background:#d4edda;color:#155724;border-color:#c3e6cb}
        .alert-error{background:#f8d7da;color:#721c24;border-color:#f5c6cb}
        @media (max-width:480px){.container{padding:30px 20px}.steps{flex-direction:column;gap:20px}.steps::before{display:none}.step{flex-direction:row;gap:15px}.step-text{max-width:none}}
    </style>
</head>
<body>
    <div class="container">
        <div class="logo"><h1>THUNDERSOFT</h1></div>
        <div class="illustration"><i class="fas fa-key"></i></div>
        <h2>Reset Your Password</h2>
        <p class="subtitle">Enter your registered email to receive a password reset link.</p>
        
        {% if error %}<div class="alert alert-error"><i class="fas fa-exclamation-circle"></i> {{ error }}</div>{% endif %}
        {% if success %}<div class="alert alert-success"><i class="fas fa-check-circle"></i> Reset link sent to <strong>{{ email }}</strong></div>{% endif %}
        
        <div class="steps">
            <div class="step active"><div class="step-circle">1</div><div class="step-text">Enter Email</div></div>
            <div class="step"><div class="step-circle">2</div><div class="step-text">Check Email</div></div>
            <div class="step"><div class="step-circle">3</div><div class="step-text">Reset Password</div></div>
        </div>
        
        {% if not success %}
        <form action="/forgot-password" method="POST">
            <div class="input-group">
                <i class="fas fa-envelope input-icon"></i>
                <input type="email" name="email" placeholder="Enter your registered email" required value="{{ email if email }}">
            </div>
            <button type="submit" class="btn submit-btn"><i class="fas fa-paper-plane"></i> Send Reset Link</button>
        </form>
        {% endif %}
        <a href="/login" class="back-link"><i class="fas fa-arrow-left"></i> Back to Login</a>
    </div>

    <script>
        document.querySelector('input[type="email"]')?.addEventListener('focus',function(){this.parentElement.classList.add('focused')});
        document.querySelector('input[type="email"]')?.addEventListener('blur',function(){if(!this.value)this.parentElement.classList.remove('focused')});
        document.querySelector('.btn')?.addEventListener('click',function(){this.style.transform='scale(0.98)';setTimeout(()=>this.style.transform='',150)});
        {% if error %}document.querySelector('input[type="email"]')?.focus();{% endif %}
    </script>
</body>
</html>